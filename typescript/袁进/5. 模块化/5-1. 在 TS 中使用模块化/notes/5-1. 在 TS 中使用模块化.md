## 5-1. 在 TS 中使用模块化

### 前言

- 时长：12min

**Summary**

- 学习 ts 中如何书写模块化语句；
- 当我们在 ts 中写了模块化语句后，生成的编译结果（js 文件）中的代码是什么样的；

> 学习 ts 中的模块化，切入点就是上面提到的这两点，一个是如何写，一个是写出来的最终结果是啥。

### config

| 配置名称            | 含义                           |
| ------------------- | ------------------------------ |
| module              | 设置编译结果中使用的模块化标准 |
| moduleResolution    | 设置解析模块的模式             |
| noImplicitUseStrict | 编译结果中不包含"use strict"   |
| removeComments      | 编译结果移除注释               |
| noEmitOnError       | 错误时不生成编译结果           |
| esModuleInterop     | 启用es模块化交互非es模块导出   |

### 前端领域的模块化标准

- **es6**
- **commonjs**
- amd
- cmd
- umd
- system
- esnext

### Best Practice

TS 中，导入和导出模块，推荐统一使用 es6 的模块化标准。

```json
{
  "compilerOptions": {
    "target": "es6", // 配置我们写的 ts 的模块化规范
    "module": "es6", // 配置编译结果 js 的模块化规范
  },
}
```

> 在 es6 module 出现之前，ts 它也有自身的一套模块化标准。但是，我们现在一般都不会去使用了，因为在 es6 出现后，ts 就实现了 es6 module，所以，我们现在在 ts 中编写模块化语句时，直接使用 es6 module 标准来写即可。

### codes

- [ ] myModule.ts | index.ts

```ts
// myModule.ts
export const nickname = "dahuyou";

export function sum(a: number, b: number) {
  return a + b;
}
```

```js
// index.ts
import { nickname, sum } from "./myModule";

console.log(nickname); // => dahuyou

console.log(sum(1, 2)); // => 3
```

和我们之前写 es6 module 时，完全一样，直接写就完事。但是，也有一些需要注意的细节问题：

#### 智能提示

![20211112165055](https://cdn.jsdelivr.net/gh/123taojiale/dahuyou_picture@main/blogs/20211112165055.png)

当我们输入 nick 时，它就会弹出智能提示，我们只需要按下回车，即可将其导入：

![20211112165143](https://cdn.jsdelivr.net/gh/123taojiale/dahuyou_picture@main/blogs/20211112165143.png)

问：为啥在记笔记测试的时候木有智能提示？
答：有可能是因为层次结构太乱了。

![20211112164859](https://cdn.jsdelivr.net/gh/123taojiale/dahuyou_picture@main/blogs/20211112164859.png)

> 尝试只打开 codes 目录，如下图所示，这样就会有智能提示了。

![20211112164930](https://cdn.jsdelivr.net/gh/123taojiale/dahuyou_picture@main/blogs/20211112164930.png)

#### 具名导出和匿名导出

- 具名导出：又叫基本导出，比如 `export const nickname = 'dahuyou';`
- 匿名导出：又叫默认导出，比如 `export default 'dahuyou';`

若想要享用智能提示的效果，那么我们应该使用基本导出的形式。若我们使用的是默认导出的形式，那么 ts 是不知道我们导出的东西是什么名字的，它就没法给我们提供智能提示。

#### 后缀名

我们在导入文件的时候，不要加 `.ts` 后缀名。因为导入语句是会生成到编译结果中的，而编译结果都是 js 文件。
