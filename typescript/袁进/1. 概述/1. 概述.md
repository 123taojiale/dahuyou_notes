# 1. 概述 {ignore}

[toc]

## 1-1. 自我介绍和课程结构介绍

### 前言

- 时长：4min

视屏的录制时间：该 typescript 课程开始录制的时间是在 2019年4月23日。

### 袁老的自我介绍

在程序员这一行混了 10 年，其中 4 年左右在搞开发，其中有 3 年时间做的是技术总监，然后转向了教育行业，干了 5 年，大致带了 1000 多位的学生。先后教过 `.NET`、`JAVA`、`PHP`，这 18、19 年，主要在做前端方向。

### 课程概述

课程结构：基础 + 进阶 + 实战。
- 基础：比较简单，讲解的是 typescript 中最为核心的部分。
- 进阶：对基础部分涉及到的相关知识点进一步讲解。
- 实战：每个部分的知识点讲解完之后，都会有对应的项目实战。

### 为什么要学习 typescript

本节课主要是对 typescript 做一个简单的概述，首先我们要了解，为什么要学习 typescript，主要有一下几点原因：
- 前端职位的需求，为了在就业的时候，提升竞争优势。
- 获取更好的开发体验。
- typescript 可以解决 js 中一些难以处理的问题。（这些问题，js 自身几乎是处理不了的，后边会挨个介绍这些问题。）

## 1-2. JS 语言的问题

### 前言

- 时长：26min

**课程内容概述**：本节课介绍的内容，主要是为了让我们了解到在使用 js 做开发时所带来的一些常见问题，而这些问题，js 自身没法解决。这正是为什么要学习 typescript 的原因。

### 问题

使用 js 开发时的一些常见问题：
- 使用了不存在的变量、函数或成员。
- 把一个不确定的类型当作一个确定的类型处理。
- 在使用 null 或 undefined 的成员。

**js的原罪**：js语言本身的特性，决定了该语言无法适应大型的复杂的项目。
- 弱类型：某个变量，可以随时更换类型。
- 解释性：错误发生的时间，是在运行时。

前端开发中，大部分的时间都是在排错。项目的规模越大，这些问题就越明显。但是，这些问题在其他语言，比如 Java 中，是不存在的，一旦我们犯了类似上述这样的错误，它就会提醒我们出错了，但是在 js 中，它就没法提醒我们发生了错误。由于 js 是弱类型，解释性的语言，所以，这些问题是 js 无法解决的。

### example

- [ ] 1.js

```js
function getUserName() {
  if (Math.random() < 0.5) {
    return "da hu you";
  }
  return 404;
}

let myname = getUsername();

mynema = myname.split(" ")
  .filter(it => it)
  .map(it => it[0].touppercase() + it.subStr(1))
  .join("");
```

上面这段代码，存在很多 bug。比如：
- 函数名写错 `getUsername`
- 变量名写错 `mynema`
- 使用了不存在的变量或成员 `it[0].touppercase()`
- 把一个不确定的类型当做一个确定的类型来处理 `let myname = getUsername();`
  函数 getUsername 的返回值，有可能是数字类型、字符串类型。这里这么写，就直接默认了它是一个字符串类型。但是若返回的是一个数字类型，那么就会报错。

这些问题，我们在开发时，多多少少都会遇到。但是，解决这些 bug，对于我们开发而言，并没有任何实质性的帮助，都是一些很低级的错误。我们希望的当这样的错误发生时，它能够提醒我们出错了，这样就能大大减少我们 debug 的时间，改善开发体验。下面我们要学习的 typescript 就是用于解决该问题的。

## 1-3. TS 语言的特点

### 前言

- 时长：29min

### What is TypeScript？

概念：
- TypeScript 是 JS 的**超集**，是一个**可选**的、**静态**的**类型系统**。（袁老给的定义）
- TypeScript 是面向对象的 JavaScript。
- TypeScript 是 JavaScript 的超集，具有可选的类型并**可以编译为纯 JavaScript**。
- TypeScript is a strongly typed programming language that builds on JavaScript, giving you better tooling at any scale.
  译：TypeScript 是一种基于 JavaScript 的强类型编程语言，它可以在任意规模的项目中，为您提供更好的工具。

> 网上对 typescript 是什么的定义有很多，以上记录的几点是比较常见的一些定义。
> 最后一个是来自 [ts官方](https://www.typescriptlang.org/) 的定义。

下面这张图来自于 [ts官网](https://www.typescriptlang.org/) 首页：

![20211107164709](https://cdn.jsdelivr.net/gh/123taojiale/dahuyou_picture@main/blogs/20211107164709.png)

译：
- TypeScript 向 JavaScript 添加了额外的语法，以支持与您的**编辑器更紧密的集成。在编辑器中尽早发现错误**。
- TypeScript 代码转换为 JavaScript，**只要是 JavaScript 可以运行的地方，它都能运行**：在浏览器中、Node.js 或 Deno 中以及您的应用程序中。
- TypeScript 理解 JavaScript 并使用类型推断为您提供出色的工具，而无需额外的代码。

注解：
- 超集：这是数学中的概念，可理解为 ts 包含 js。
- 可选：表示我们在写 ts 代码时，完全可以按照之前写 js 代码的形式来写，ts 给我们提供的功能，我们可以选用。当然，不用也是完全 OK 的，并不会报错。
- 静态：指变量的数据类型不可变，这一点和 js 是完全不同的。所以，无论是浏览器环境，还是 node 环境，它们都能直接识别 js 代码，但是无法直接识别 ts 代码。
- 类型系统：对代码中所有的标识符（变量、函数、参数、返回值）进行类型检查。**类型检查发生的时间，是在编译的时候，而非代码运行的时候**。TS 不参与任何运行时的类型检查。

TS 和 JS 的关系：
![20211107203643](https://cdn.jsdelivr.net/gh/123taojiale/dahuyou_picture@main/blogs/20211107203643.png)

有关 TS 的一些常识：
- TS 是微软在 2012 年发布的。
- 由 Anders Hejlsberg 负责开发 TS 项目。
- 开源、拥抱 ES 标准。
- 版本：4.4（当前时间 2021年11月7日 的最新版）
  - 视频录制时是 19 年 4 月，当时版本是 3.4。
- 官网：http://www.typescriptlang.org/

> 中文网：https://www.tslang.cn/
> 这个中文网是个人翻译的，里边有一些翻译不是很准确，若有阅读外文文档的能力，最好还是去看[官网](http://www.typescriptlang.org/)。

### 体验 ts

```js
// 1.js => 上节课的问题代码
function getUserName() {
  if (Math.random() < 0.5) {
    return "da hu you";
  }
  return 404;
}

let myname = getUsername();

mynema = myname.split(" ")
  .filter(it => it)
  .map(it => it[0].touppercase() + it.subStr(1))
  .join("");
```

我们将文件 1.js 重命名为 1.ts。会发现它会将我们代码中，这些明显出错的地方标注出来。如下图所示：

![20211107155443](https://cdn.jsdelivr.net/gh/123taojiale/dahuyou_picture@main/blogs/20211107155443.png)

```ts
// ts 提示我们函数名写错了，修改一下函数名：
function getUserName() {
  if (Math.random() < 0.5) {
    return "da hu you";
  }
  return 404;
}

let myname = getUserName();

mynema = myname.split(" ")
  .filter(it => it)
  .map(it => it[0].touppercase() + it.subStr(1))
  .join("");
```

修改好函数名后，我们再来看 ts 帮我们定位到的下一个问题：

![20211107155710](https://cdn.jsdelivr.net/gh/123taojiale/dahuyou_picture@main/blogs/20211107155710.png)

```ts
// 修改变量名
function getUserName() {
  if (Math.random() < 0.5) {
    return "da hu you";
  }
  return 404;
}

let myname = getUserName();

myname = myname.split(" ")
  .filter(it => it)
  .map(it => it[0].touppercase() + it.subStr(1))
  .join("");
```

![20211107155810](https://cdn.jsdelivr.net/gh/123taojiale/dahuyou_picture@main/blogs/20211107155810.png)

```ts
// ts 告诉我们 myname 的类型有可能是 string | number，但是 number 类型上不存在 split 方法。
// 我们只要在执行这段程序之前做一个类型检测即可：
function getUserName() {
  if (Math.random() < 0.5) {
    return "da hu you";
  }
  return 404;
}

let myname = getUserName();

if (typeof myname === "string") {
  myname = myname.split(" ")
    .filter(it => it)
    .map(it => it[0].touppercase() + it.subStr(1))
    .join("");
}
```

![20211107160025](https://cdn.jsdelivr.net/gh/123taojiale/dahuyou_picture@main/blogs/20211107160025.png)

```ts
// 修改方法名
function getUserName() {
  if (Math.random() < 0.5) {
    return "da hu you";
  }
  return 404;
}

let myname = getUserName();

if (typeof myname === "string") {
  myname = myname.split(" ")
    .filter(it => it)
    .map(it => it[0].toUpperCase() + it.subStr(1))
    .join("");
}
```

![20211107160116](https://cdn.jsdelivr.net/gh/123taojiale/dahuyou_picture@main/blogs/20211107160116.png)

```ts
// 修改方法名
function getUserName() {
  if (Math.random() < 0.5) {
    return "da hu you";
  }
  return 404;
}

let myname = getUserName();

if (typeof myname === "string") {
  myname = myname.split(" ")
    .filter(it => it)
    .map(it => it[0].toUpperCase() + it.substr(1))
    .join("");
}
```

最终代码如下：

```js
// 1.ts
function getUserName() {
  if (Math.random() < 0.5) {
    return "da hu you";
  }
  return 404;
}

let myname = getUserName();

if (typeof myname === "string") {
  myname = myname
    .split(" ")
    .filter((it) => it)
    .map((it) => it[0].toUpperCase() + it.substr(1))
    .join("");
}
```

### Globally Installing TypeScript

You can use npm to install TypeScript globally, this means that you can use the `tsc` command anywhere in your terminal.

```shell
npm install -g typescript
```

- what is `tsc`?

tsc 的全称为 typescript compiler，它是 typescript 的编译器，可以将我们写的 ts 代码给转换为 js 代码。

- how to use `tsc`?

```shell
tsc 1.ts # 将当前目录的 1.ts 文件给编译为 1.js
```

![20211107203231](https://cdn.jsdelivr.net/gh/123taojiale/dahuyou_picture@main/blogs/20211107203231.png)

![20211107203239](https://cdn.jsdelivr.net/gh/123taojiale/dahuyou_picture@main/blogs/20211107203239.png)

> 我们会发现，这样编译之后，原来的 1.ts 文件会出现报错信息，暂且先别管这些错误信息，以及编辑后生成的 1.js 文件的内容，后边会介绍为什么。

### 额外的惊喜

我们仅仅是将后缀名改为 `.ts`，它就能帮我们定位到这些低级的错误。好让我们提前将这些错误给排除，单单是这一点功能，我们就有学习 ts 的必要。除此之外，它还给我们带来的一些额外的惊喜：**完善了 js 的面向对象开发**。

由于有了类型检查，增强了 js 面向对象的开发。js 中也有类和对象，它本身也是支持面向对象的开发方式的，但是由于 js 自身是没有类型检查的，这就导致很多面向对象的场景实现起来会出现诸多问题。所以，直接使用 js 实现面向对象，还不是很完善。但是，ts 出现后，我们就可以利用它编写出更加完善的面向对象的代码。