## 4-1. 字面量类型的问题

### 前言

- 时长：11min

认识某些场景下，若我们要限定变量的取值范围时，不使用枚举式写法所带来的一些问题。

### 扩展类型

扩展类型就是我们自己定义的一些类型：
- 类型别名
- 枚举
- 接口
- 类

### 枚举

我们本节课要学习的“枚举”，通常用于约束某个变量的取值范围。

虽然，我们前面所学习的“字面量”和“联合类型”配合使用，也可以达到同样的效果。但是，它们还存在一些问题，这些问题就是本节课要介绍的点。



### 问题

- 在类型约束位置，会产生重复代码。
- 逻辑含义和真实的值产生了混淆，会导致当修改真实值的时候，产生大量的修改。
- 字面量类型不会进入到编译结果。

对于第一个有关重复代码的问题，可以使用类型别名来解决。但是，另外两个问题，使用类型别名就没法解决了。

> 上面提到的这些问题，都将在 codes 部分，以代码的形式来呈现。问题具体如何解决，会在 3-2 中介绍。

### codes

- [ ] 1.ts

```ts
let gender: "male" | "female";

gender = "male";

function searchUsers(g: "male" | "female") {}
/*
使用字面量类型，会在类型约束的位置产生大量的重复代码。
对于该问题，我们可以使用之前学习到的类型别名来解决。
*/
```

- [ ] 2.ts

```ts
type Gender = "male" | "female";

let gender: Gender;

gender = "male";

function searchUsers(g: Gender) {}
/*
使用类型别名解决在类型约束位置产生的重复代码问题。
*/
```

- [ ] 3.ts

我们知道，对于性别，无非就是“男 | 女”。但是，我们显示给用户看的真实的值，可就不一定是“男 | 女”了，也可以是“先生 | 女士”、“帅哥 | 美女”、“boy | girl”、“male | female”等等。

那么就会有这样一种情况，倘若有一天，我们需要修改展示给用户看的值，那么我们需要修改的地方就会很多，工作量就会很大，而且容易出错。而我们希望的是，只要修改类型约束部分，修改一个地方就可以完成所有的修改。对于这样的需求，使用原来的字面量式写法，显然就无法解决了。使用枚举，就可以很好地解决这样的问题。

```ts
type Gender = "男" | "女";

let gender: Gender;

gender = "男";

function searchUsers(g: Gender) {}
```

![20211112110310](https://cdn.jsdelivr.net/gh/123taojiale/dahuyou_picture@main/blogs/20211112110310.png)

当我们修改完 1 后，还得修改 2。虽然在个案例中看不出有什么大问题，但是，试想一下，若程序的规模很大，很多地方都用到了 Gender 类型，那我们需要修改的量，可就不是上边这么一丢丢了。

```js
// 编译结果
let gender;
gender = "男";
function searchUsers(g) { }
```

从编译结果中，我们可以看出，类型别名是不会生成到最终的结果中的。若我们在编辑结果中想要获取到 gender 所有可能的值，也就是 Gender 中限定的值，那么使用上面这种类型别名的写法，也是无法获取到的。