## 3-2. 基本类型 {ignore}

[toc]

### 前言

- 时长：13min

### 基本类型

- number：`:number`
- string：`:string`
- boolean：`:boolean`
- object：`:object`
- array：`:number[]`、`:Array<number>`
- null：`:null`
- undefined：`:undefined`
- any：`:any`

null 和 undefined 是所有其他类型的子类型，它们可以赋值给其他类型。通过添加 `strictNullChecks:true`，可以获得更严格的空类型检查，null 和 undefined 只能赋值给自身。

### codes

- [ ] 1.ts

```ts
// 封装 boolean 函数，当我们写到下面这一步时，boolean 会有警告。
// 因为我们还没有开始写函数体，没有指定函数的返回值。
function isOdd(n: number): boolean { }
// 其声明类型不为 "void" 或 "any" 的函数必须返回值。
```

```ts
// 当我们写到这一步时，就不会有报错了
function isOdd(n: number): boolean {
  return n % 2 === 0;
}
```

```ts
// 返回值也可以不进行约束，ts 会智能地进行类型推导，它能够识别出表达式 n % 2 === 0 的结果必然是一个 boolean 类型。
function isOdd(n: number) {
  return n % 2 === 0;
}
```

![20211111141040](https://cdn.jsdelivr.net/gh/123taojiale/dahuyou_picture@main/blogs/20211111141040.png)

如上图所示，ts 会自动识别出函数 isOdd 的返回值是 boolean 类型，所以我们可以直接省略对其返回值的类型声明。其实，在很多情况下，ts 都能够帮我们完成类型推导。

> 类型推导是否成功，在前面介绍过，就是看变量名左下角是否有三个小点。
> 类型推导的结果，我们也可以查看，方式也很简单，直接将鼠标悬停在变量名上边即可。

- [ ] 2.ts

```ts
let nums_1: number[] = [1, 2, 3];

let nums_2: Array<number> = [1, 2, 3];
/*
number[] 是 Array<number> 的语法糖，它们俩是等效的。
表示的含义是：要求数组的每一项都是数字类型。
推荐使用第一种写法：number[]
*/
```

```ts
let nums = [1, 2, 3];
/*
我们也可以直接这么写，ts 会帮我们完成类型推导。
将鼠标悬停在 nums 上，会提示：“let nums: number[]”，表示 nums 是一个数字数组，nums 的每一个成员都是数字类型。
所以说，我们平时在写 ts 时，虽然还是用原来写 js 的习惯来写，但是代码的质量就会比之前要高很多，它能帮我们规避一些不必要的问题。
*/
```

- [ ] 3.ts

```ts
let user: object = {
  name: "dahuyou",
  age: 22,
};
/*
object 虽然也具有一定的限制作用，但是，它的限制作用不强。
它只能限制我们给 user 变量赋值时必须赋一个对象，但是无法限制对象里面每个成员具体是什么类型。
所以，我们一般很少会使用它。
*/
```

- [ ] 4.ts

```ts
function printObj(obj: object) {
  const vals = Object.values(obj);
  vals.forEach((v) => console.log(v));
}

printObj({
  name: "dahuyou",
  age: 22,
});
```

- [ ] 5.ts

```ts
let str: string = undefined;
/*
null 和 undefined 是所有其他类型的子类型，它们可以赋值给其他类型。
但是，在开启 "strictNullChecks": true 的情况下，会报错：不能将类型“undefined”分配给类型“string”。
*/
```

上面这种写法，并不会报错，因为 undefined 会被识别为 string 的子类型，上面这种赋值的方式是被允许的。但是，这样的操作往往是我们不希望看到的，我们可以通过在配置中添加 `strictNullChecks:true`，以获得更严格的空类型检查，使得 null 和 undefined 只能赋值给自身。

```json
{
  "compilerOptions": {
    "target": "es2016",
    "module": "commonjs",
    "lib": [
      "es2016"
    ],
    "outDir": "./dist",
    "strictNullChecks": true
  },
  "include": [
    "./src"
  ],
}
```

**Attention**：strictNullChecks 要写在 compilerOptions 下边，它是编译的配置项。