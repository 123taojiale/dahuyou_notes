## 3-3. 其它类型 {ignore}

[toc]

### 前言

- 时长：19min

### 其它类型

除了上节介绍的基本类型外，ts 还给我们提供了一些其它常用的类型：

- 联合类型：多种类型任选其一；
- viod 类型：通常用于约束函数的返回值，表示函数没有任何返回；
- never 类型：通常用于约束函数的返回值，表示该函数永远不可能结束；
- 字面量类型：使用一个值进行约束；
- 元祖类型（Tuple）：一个固定长度的数组，并且数组中的每一项的类型确定；
- any 类型：any 类型可以绕过类型检查，因此，any 类型的数据可以赋值给任意类型；

### 类型保护

类型保护：当对某个变量进行类型判断之后，在判断的语句块中便可以确定它的确切类型，typeof 可以触发类型保护。

联合类型可以配合类型保护进行判断。

> 类型保护的触发方式有很多种，后边会有对应的课程专门介绍，通常我们会使用 typeof 来触发简单类型（number、string、boolean 等）的类型保护。

### codes

- [ ] 1.ts

```js
let foo: string | number[] = [1, 2, 3];
/*
foo 可以是 string 类型，也可以是 number[] 类型。
*/
```

- [ ] 2.ts

```ts
let foo: string | number[];

foo; // => string | number[]

// 类型保护
if (typeof foo === "string") {
  foo; // => string
  foo = foo.toUpperCase();
} else {
  foo; // => number[]
  foo.forEach((v) => console.log(v));
}
/*
联合类型配合类型保护，可以明确变量 foo 具体是什么类型。
当 ts 能够明确某个变量具体是什么类型时，我们在调用它身上的一些方法时，都会有精准的智能提示。
*/
```

![20211111154054](https://cdn.jsdelivr.net/gh/123taojiale/dahuyou_picture@main/blogs/20211111154054.png)

补充：

![20211111155545](https://cdn.jsdelivr.net/gh/123taojiale/dahuyou_picture@main/blogs/20211111155545.png)

- [ ] 3.ts

```ts
function printMenu() { // function printMenu(): void
  console.log("1. login");
  console.log("2. singn up");
}
```

- [ ] 4.ts

```ts
function throwError(msg: string): never {
  throw new Error(msg);
  console.log("123"); // 永远不会执行
}
/*
若我们不指定 throwError 函数的返回值，那么它推断出来的结果是：
  function throwError(msg: string): void
在这种情况下，我们就需要手动约束，指定其返回值为 never，表示该函数永远不可能结束。
*/
```

- [ ] 5.ts

```ts
function alwaysDoSomething(): never {
  while (true) {
    // ...
  }
}
/*
若不进行约束，那么识别出函数的返回值为 void
  function alwaysDoSomething(): void
此时，也需要我们进行手动约束。
*/
```

- [ ] 6.ts

```ts
let gender: "male" | "female";
gender = "male";
/*
字面量约束，是一种很强力的约束，我们只能从指定的字面量中选值。
*/
```

![20211111160520](https://cdn.jsdelivr.net/gh/123taojiale/dahuyou_picture@main/blogs/20211111160520.png)

```ts
let arr: []; // 这也是一个字面量约束，表示 arr 只能赋值为一个空数组。
```

- [ ] 7.ts

```ts
// 对象的字面量约束（注意语法）
let user: {
  name: string;
  age: number;
};

user = {
  name: "dahuyou",
  age: 22,
};
/*
对象也可以有字面量约束。
上述代码约束 user 对象需要具有两个属性：name，age；
并且：name 必须是 string 类型，age 必须是 number 类型；
*/
```

> 我们一般不会使用上面这种写法来对一个对象进行约束，在学习了后边的知识后，我们一般会采用“接口”、“类”、“类型别名”。。。来对对象类型的数据进行约束。

- [ ] 8.ts

```ts
let tuple: [number, string];
tuple = [1, "1"];
/*
元祖类型（Tuple）：一个固定长度的数组，并且数组中的每一项的类型确定；
要求 tuple 必须是一个数组，该数组必须有两项，第一项必须是 number 类型、第二项必须是 string 类型。
*/
```

- [ ] 9.ts

```ts
let data:any = "123";
let num:number = data;
/*
any 类型：any 类型可以绕过类型检查，因此，any 类型的数据可以赋值给任意类型；
上述代码不会报错，但是，我们往往不希望有这样的行为，所以 any 类型，非必要的情况下，最好不要使用。
*/
```

