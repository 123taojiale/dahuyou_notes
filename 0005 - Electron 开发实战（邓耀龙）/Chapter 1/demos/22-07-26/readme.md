# 版本说明

![](https://raw.githubusercontent.com/123taojiale/dahuyou_picture/main/blogs/202207271651790.png)

# 状态的管理「难点」

一共有 4 个状态需要控制：
- 0 「开始工作」
  - 未开始计时，此时 remainingTime 为 0
- 1 「停止工作」
  - 计时中
  - 工作计时自动结束，会展示提示框；但是，点击按钮中断计时导致计时结束，不会展示提示框
- 2 「开始休息」
  - 未开始计时，此时 remainingTime 为 0
- 3 「停止休息」
  - 计时中
  - 休息计时自动结束，会展示提示框；但是，点击按钮中断计时导致计时结束，不会展示提示框

管理这 4 个状态，共有 3 块交互逻辑：
1. 计时器是否结束
2. 用户点击了下方的切换按钮
3. 用户点击了右上方弹出的提示框按钮

开发的时候，可以按照这 3 个交互功能来开发。本次流程是：
1. 处理自动的逻辑 —— 处理好计时器自动结束后的状态正确；
2. 处理用户点击切换按钮的逻辑 - 检查在计时中点击，以及计时时间结束后点击，状态是否和预期的一致
3. 处理提示框的交互逻辑
4. 处理第 2 步和第 3 步之间的冲突
  这里做了一个相对比较合理的简化处理：如果正在计时过程中，点击了 notification 中的按钮，那么啥也不会处理


![](https://raw.githubusercontent.com/123taojiale/dahuyou_picture/main/blogs/202207271634630.png)

