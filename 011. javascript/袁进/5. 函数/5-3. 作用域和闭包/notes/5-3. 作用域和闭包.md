## 5-3. 作用域和闭包 {ignore}

[toc]

### 作用域

作用域表示一个代码区域，也表示一个运行环境。

目前只介绍两种作用域：全局作用域、局部作用域。

在学到ES6时，还会认识到第3种作用域：块级作用域。

### 全局作用域

直接在脚本中书写的代码，就处于局部作用域中。

在全局作用域中声明的变量，会被提升到脚本块的顶部，并且会成为全局对象的属性。

### 局部作用域

局部作用域又称函数作用域。写在函数中的代码，就处于局部作用域中。

在函数作用域中声明的变量，会被提升到函数的顶部，并且不会成为全局对象的属性。因此，函数中声明的变量不会导致全局对象的污染。（不使用关键字，直接声明变量，这是特殊情况，一般不会有人这么做。）

把功能封装在函数中，这样做有很多好处，其中一个就是让实现这些功能的变量不污染全局环境。

### 作用域中可以使用的变量

全局作用域只能使用全局作用域中声明的变量（包括函数）。

函数作用域不仅能使用自身作用域中声明的变量（包括函数），还能使用外部环境的变量（包括函数）。注意: 外部环境 ≠ window，但是，在浏览器环境下，外部环境就是指 window，由于 es 的宿主环境不仅限于浏览器，还有很多其他的宿主环境。

函数内部声明的变量和外部冲突时，使用内部的。

有的时候，某个 函数a 比较复杂，在编写的过程，可能需要另外一些函数来辅助它完成一些功能，而这些函数仅仅会被该 函数a 使用，不会在其他位置使用，则可以将这些函数声明到该函数的内部。（函数里面套函数）

### 闭包

闭包（closure）, 是一种现象，指：内部函数，可以使用外部函数环境中的变量。
