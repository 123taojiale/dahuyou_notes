
## 题解1 中心扩散

```javascript
/**
 * 22-09-28
 * @param {string} s
 * @return {string}
 */
var longestPalindrome = function (s) {
  const len = s.length

  if (len < 2) return s

  let maxLen = 0
  let ans = [0, 1] // 数组第一位记录起始位置，第二位记录长度

  for (let i = 0; i < len - 1; i++) {
    const odd = centerSpread(s, i, i)
    const even = centerSpread(s, i, i + 1)
    const max = odd[1] > even[1] ? odd : even
    if (max[1] > maxLen) {
      ans = max
      maxLen = max[1]
    }
  }

  return s.slice(ans[0], ans[0] + ans[1])
};

function centerSpread(s, l, r) {
  let len = s.length
  while (l >= 0 && r <= len - 1) {
    // 如果不相等，结束循环
    if (s[l] !== s[r]) break 

    // 如果相等，则继续往两侧扩散，准备下一次判断
    l--
    r++
  }
  // 两侧各回退到上一步所在的位置（while 循环结束有两种可能：1. 有指针溢出；2. 不满足扩散条件）
  l++
  r--
  return [l, r - l + 1]
}
```

![image.png](https://cdn.nlark.com/yuque/0/2022/png/2331396/1664375730361-dc128ead-4b61-4cb7-94ba-bc81989c683f.png#clientId=uba5a99fe-417a-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=122&id=u048b67f8&margin=%5Bobject%20Object%5D&name=image.png&originHeight=244&originWidth=874&originalType=binary&ratio=1&rotation=0&showTitle=false&size=49126&status=done&style=stroke&taskId=u80130a35-43f4-42d2-977c-23cb5309f6e&title=&width=437)

**注解：**
中心扩散的核心在于理解一个点：中心有可能是指定的某个成员，也可能是两个成员之间的间隙。

- 当 `l` 和 `r` 指针，指向的是同一个成员时，表示从指定成员开始向两端扩散

![image.png](https://cdn.nlark.com/yuque/0/2022/png/2331396/1664376167034-86900a78-cec4-4662-8838-9389e2c94b23.png#clientId=uba5a99fe-417a-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=151&id=udf6a52ed&margin=%5Bobject%20Object%5D&name=image.png&originHeight=302&originWidth=456&originalType=binary&ratio=1&rotation=0&showTitle=false&size=16956&status=done&style=stroke&taskId=uc1335e8a-c447-4e86-8a4f-cd926b9deb2&title=&width=228)

- 当 `l` 和 `r` 指针，指向的是相邻的两个成员时，表示从两个成员之间的间隙，向两端扩散

![image.png](https://cdn.nlark.com/yuque/0/2022/png/2331396/1664376169449-159ceb7e-dda3-4ca7-9770-e750d6f44674.png#clientId=uba5a99fe-417a-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=151&id=u94a39c0c&margin=%5Bobject%20Object%5D&name=image.png&originHeight=302&originWidth=456&originalType=binary&ratio=1&rotation=0&showTitle=false&size=16736&status=done&style=stroke&taskId=uec231673-8df0-4bee-86f6-bd0c74ee093&title=&width=228)

- 每次扩散，指针 `l` 左移一步，指针 `r` 右移一步
- 扩散的条件是满足回文串的特点，也就是 `s[l]` 和 `s[r]` 两者相等
- 每次扩散到没法扩散时，记录下从该位置开始扩散所能扩散到的最长的回文子串

在题解中，记录结果的数据结构，采用的是一个长度为 `2` 的数组，数组的第一位存放子串的起始位置，第二位存放子串的长度。当所有位置都遍历完之后，我们就可以依据该数组，对字符串 `s` 进行截取，最终将结果返回即可。


