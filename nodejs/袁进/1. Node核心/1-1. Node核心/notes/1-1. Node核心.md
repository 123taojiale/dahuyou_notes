# 1-1. Node核心

## 前言

- 时长：34 min

### 版本说明

在编写该笔记的时间点，node 的最新版本是 [15.14.0](https://nodejs.org/docs/latest-v15.x/api/)。

## 官网

- [node 官网](https://nodejs.org/en/)
- [node 民间中文网](http://nodejs.cn/learn/introduction-to-nodejs)

## Node.js 是什么？

### 官方定义

Node.js® is a JavaScript runtime built on Chrome's V8 JavaScript engine.（Node.js 是一个基于 Chrome V8 引擎的 JavaScript 运行环境。）

### 民间定义

- Node.js 是运行在服务端的 JavaScript。
- Node.js 是一个开源和跨平台的 JavaScript 运行时环境。
- Node.js 是一个事件驱动 I/O 服务端 JavaScript 环境，基于 Google 的 V8 引擎，V8 引擎执行 Javascript 的速度非常快，性能非常好。

### 我的理解

- 浏览器是 es 的一个运行环境，node 就如同浏览器一样，它是一个 es 的宿主环境；

我们前面所学习的 javascript 其实就是 es + web api（浏览器提供的一系列 api）。从这节课开始，我们所要学习的就是 nodejs，它其实就是运行在 node 环境中的 es，本质上就是 es + node api（服务器环境提供的一系列api）。



## 宿主环境

### 宿主环境是什么？

这里所说的宿主环境，其实就是 es 能够执行的环境，比如「浏览器环境」、「服务器环境」、「桌面环境」等。



### 宿主环境有什么用？

宿主环境的作用是给语言「赋能」的，不同的宿主环境，给 es 提供的 api 不同，所以能够实现的功能也不相同。



- 赋能？

es 语言本身，不带任何的输入输出语句，输入输出都是由宿主环境提供的 api 来实现的；

es 语言本身，不能写出个弹框，这也是基于宿主环境的 api 来实现的；

等等。。。

类似于这些功能，语言本身其实是不带有的，但是在不同的宿主环境下执行，调用宿主环境提供的对应的 api，就“拓展”了语言的功能。

对于不同的宿主环境，给语言赋予的能力也是不同的。在浏览器环境下，es 能做的事儿是很受限的，比如「读写文件」的能力，浏览器就没有提供给 es。但是在服务器环境下，es 能做的事儿就很多了，通过 node 环境，我们可以利用 es 直接操作我们的操作系统。



## javascript 和 nodejs

- 分层结构对比图

<img src="https://gitee.com/dahuyou_top/pic-bed/raw/master/uPic/image-20211220200234102.png" alt="image-20211220200234102" style="zoom:67%;" />

浏览器提供了有限的能力，JS 只能使用浏览器提供的功能做有限的操作。Node 提供了完整的控制计算机的能力，NodeJS 几乎可以通过 Node 提供的接口，实现对整个操作系统的控制。

- 已经有 javascript 了，为什么还要弄出一个 nodejs？

因为在浏览器环境下，我们所能处理的事儿很有限，比如读写文件、计算机进程的开启与关闭之间的切换、跨域问题、等等一系列操作都会受限。但是，在服务器环境下，这些事儿都是可以实现的。说简单点，就是有一些事儿，我们在浏览器环境下干不了，而在服务器环境下，我们就可以干这些事儿，所以才又整出一个 nodejs。nodejs 是用来写后端的，并且 java 可以做的事儿，nodejs 也都能做。

## node 和 Java

- 能做啥事儿？

node 是用来做后端的。Java 能做的事儿，node 都能做，只不过有些事儿使用 Java 来做，效果比使用 node 来做更好，因为 Java 的生态比 node 更完善。

- 速度谁快？

不能单一的说两者的速度谁快。运算速度 Java 更快；如果是比 I/O 速度的话，node 更快。

## 我们通常使用 node 干什么？

1. 开发桌面应用程序
2. 开发服务器应用程序（写后端）

> node 拥有开发桌面应用程序的能力，但是，目前好像还不那么流行，知道它能干这活儿就可以了。

## 开发服务器应用程序的两种常见结构

### 「结构1」

<img src="https://gitee.com/dahuyou_top/pic-bed/raw/master/uPic/image-20211220200651509.png" alt="image-20211220200651509" style="zoom:37%;" />



这种结构通常应用在微型的站点上；Node 服务器要完成请求的处理、响应、和数据库交互、各种业务逻辑。

### 「结构2」

<img src="https://gitee.com/dahuyou_top/pic-bed/raw/master/uPic/image-20211220200725463.png" alt="image-20211220200725463" style="zoom:37%;" />

这种结构非常常见，应用在各种规模的站点上。Node 服务器不做任何与业务逻辑有关的事情。绝大部分时候，只是简单的转发请求。但可能会有一些额外的功能，比如，简单的信息记录（请求日志、用户偏好、广告信息）、静态资源托管、缓存等等。

