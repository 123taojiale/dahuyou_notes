## 2-4. 变量和对象

- 回顾上一节课学习过的 数据类型

原始类型：number、string、boolean、null、undefined

引用类型：object、function

- 在对象中存放变量

通过变量，读取对象中的某个属性：`变量名.属性名`。当读取的属性不存在时，会得到 `undefined`。由此可知，若想删除一个对象上的某个属性，有以下两种可行的方式：

1. 可以用 `delete 对象名.属性名` 的形式来删除，这种方式会直接将对象中的某个属性给删除；
2. 还可以直接赋值 `对象名.属性名 = undefined;`，对比前一种方式，这种方式的实现原理是：重新给对象中的某个属性赋值，属性依旧存在，不过值是 `undefined`；

> 这两种方式都有对应的使用场景

- 当我们试图从一个不存在的对象（undefined、null）身上读取属性时，程序会报错。

有统计数据显示，js报错排名第一的，就是从 undefined 或 null 中读取属性。

- 通过变量，更改对象中的某个属性，当赋值的属性不存在时，会添加属性。
  - 若属性存在 ==> update
  - 若属性不存在 ==> create

- 属性表达式：`对象名["属性名"]`

`[]` 括号内可以书写 js 表达式，相较于 `对象名.属性名` 而言，属性表达式会更加灵活。

`对象名["属性名"]` 使用这种方式来操作对象上的属性，在之后的学习中，你会发现这种写法有大用途；

- 属性名中可以包含特殊字符

实际上，JS对属性名的命名要求并不严格，属性可以是任何形式的名字，因为最终都会转换为字符串。

```js
console.log(obj[0]);
// 等价于
console.log(obj["0"]);
```

```js
var obj = {};
obj[0] = '123';     // { "0": "123" }
obj["0"] = '234';   // { "0": "234" }
console.log(obj[0], obj["0"]);  // 234 234
```

- 全局对象

JS大部分的宿主环境，都会提供一个特殊的对象，该对象可以直接在JS代码中访问，该对象叫做全局对象。

在浏览器环境中，全局对象为window，表示整个窗口。

> 在 node 环境下，全局对象为 global。

全局对象中的所有属性，可以直接使用，而不需要写上全局对象名。

开发者定义的所有变量，实际上，会成为 window 对象的属性。

> 注意：这种说法是不严谨的，在学习函数那一部分知识点时，还会详细说明。

- 如果变量没有被赋值，则该变量不会覆盖 window 对象上的同名属性。

若仅声明了一个变量，没有给变量赋值，并且该变量名与 window 的属性名同名，那么相当于没有定义这个变量，该声明语句就跟不存在一样。

> 知道这些对于开发而言，实际上帮助可能不大，不过奇葩的面试题就可能会考察这些看似不重要的玩意儿。

```js
var name;
console.log(name); // 不会报错，控制台啥也没输出。
```

原因在于 window对象 下面也有一个属性名为 name 的属性，默认值是空字符串 ''。

这个 name 属性比较特殊，赋给 name 属性的任何值，都会转化为 string 类型。

```js
var name = 1;
console.log(name); // "1"
console.log(typeof name); // string
```

这是很怪异的行为，不过，我们不需要刻意去记，后期遇到类似的情况，注意看看是否是 window对象 上已经存在的属性即可。

---


- 小结
   - 需要掌握对象的基本操作 增、删、改、查；
   - 学会使用属性表达式 `对象名["属性名"]` 来访问对象身上的成员；
   - 变量（对象名）中存放的对象，实际上存放的是这个对象的地址（也称对象的引用）；
   - 读取对象中不存在的属性，不会报错，而是返回 undefined；
   - 从一个不存在的对象（undefined、null）中读取属性，会报错；
   - 修改对象中不存在的属性，实际上是给对象添加属性；
   - 如果在全局环境创建了与 window 全局对象属性同名的变量，且对变量进行了赋值，那么新创建的变量将会覆盖 window 全局对象中的那个属性；

> "变量和对象" 这一节实际上是对上一节 "变量" 的补充


- [x] 练习对象的基本操作

```js
// step1. 定义一个变量，存放对象，包含姓名、年龄、性别、女朋友（姓名、年龄、性别）
var cheng = {
   name: "成哥",
   age: 18,
   gender: "男",
   girlFriend: {
       name: "小花",
       age: 50,
       gender: "女"
   }
};
// step2. 定义一个变量，存放对象，包含姓名、年龄、性别、女朋友，女朋友和第一个变量的女朋友是一样的
var deng = {
   name: "邓哥",
   age: 53,
   gender: "男"
};

deng.girlFriend = cheng.girlFriend; // [增]

// [查]step3. 输出：成哥女朋友的姓名，邓哥女朋友的姓名
console.log(cheng.girlFriend.name, deng.girlFriend.name);

// step4. 邓哥和女朋友分手了
deng.girlFriend = undefined; // [改]
console.log(deng); // {name: "邓哥", age: 53, gender: "男", girlFriend: undefined}

// delete deng.girlFriend; // [删]
// console.log(deng); // {name: "邓哥", age: 53, gender: "男"}
```
