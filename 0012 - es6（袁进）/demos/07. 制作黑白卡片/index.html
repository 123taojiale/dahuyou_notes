<!DOCTYPE html>
<html lang="en">

<head>
    <title>制作黑白卡片</title>
</head>

<body>
    <div style="display: flex;">
        <img src="./img/liao.jpg" alt="">
        <button onclick='change()'>转化</button>
        <canvas width="100" height="117"></canvas>
    </div>

    <script>
        const cnv = document.querySelector('canvas');
        const ctx = cnv.getContext('2d');
        const img = document.querySelector('img');

        function change() {
            ctx.drawImage(img, 0, 0);
            // 获取图片数据
            const imageData = ctx.getImageData(0, 0, img.width, img.height);
            for (let i = 0; i < imageData.data.length; i+=4) {
                const r = imageData.data[i];
                const g = imageData.data[i + 1];
                const b = imageData.data[i + 2];
                const avg = (r + g + b) / 3;
                imageData.data[i] = imageData.data[i + 1] = imageData.data[i + 2] = avg;
            }
            ctx.putImageData(imageData, 0, 0);
        }
    </script>
</body>

</html>
