## 5-1. 函数语法 {ignore}

[toc]

### 函数的作用

函数主要用于减少重复代码。因为重复代码，让程序难以维护。

在开发时，我们通常会将一个个功能（代码块）给封装成一个个函数，以便我们后续调用。当我们需要使用某个功能时，再调用这些封装好的函数即可，就不需要再写大量的重复代码了。

### 创建（定义、声明）函数

```js
// 通过函数字面量的形式来声明函数
function 函数名(){
  // 函数体
}
```

函数体的代码不会直接运行，必须要手动调用函数，才能运行其中的代码。

### 调用函数

```js
// 语法
函数名(); // 运行函数体
```

调用函数的很简单，只要在函数名儿的后边加上一对小括号即可。

### 函数的三要素

- 函数名
- 函数参数
- 返回值

函数名：就是我们在定义函数的时候，给函数起的名儿。

函数参数：通常，我们在调用函数的时候，都会传入一些参数，我们所传入的这些参数，就是函数参数。

返回值：调用函数的式子，它本质上也就是一个普通的 js 表达式，既然是表达式，自然就会有返回值。函数的返回值，就是我们在调用函数后，函数返回给我们的结果。

### 函数提升

```html
<script>
  test(); // => test
  function test() {
    console.log('test');
  }
</script>
```

我们在定义 test函数 之前，调用了它，这为什么没有报错，就是因为函数提升导致的。

它的等效代码如下：

```html
<script>
  function test() {
    console.log('test');
  }
  test(); // => test
</script>
```

虽然，test函数 定义在后边，但是，在执行时，它会默认被提升到顶部，即：提前帮我们定义好 test函数。所以，我们调用 test函数 时，并没有报错：该函数不存在。

```html
<script>
  test(); // => Uncaught ReferenceError: test is not defined
</script>
<script>
  function test() {
    console.log('test');
  }
</script>
```

通过字面量声明的函数，会提升到 脚本块（script 元素） 的顶部。但是，并不会越过脚本块。

```
【阅读报错信息】
Uncaught ReferenceError: test is not defined
这句报错信息的含义是：抛出了一个未捕获的引用错误，test 没有定义。
ReferenceError => 引用错误
通常，当我们获取一个作用域中不存在的变量（函数可以看做是一个变量）时，就会抛出该错误。
通俗点说，就是找不到 test。
```

---

```js
function test() {
  // 函数体
}
window.test === test; // => true
```

通过字面量声明的函数，会成为全局对象的属性。

### typeof 函数名

使用 typeof 关键字来判断一个变量的类型时，若该变量是函数类型，那么会返回 "function"。

```js
function test() {
  // 函数体
}
typeof test; // "function"
```

### 函数内部声明变量

1. 如果不使用 var 声明，和全局变量一致，表示给全局对象添加属性。（不建议这么干）
2. 如果使用 var 声明，变量提升到所在函数的顶部，函数外部不可以使用该变量。

下面，来看个例子：

```js
function test() {
  a = 1;
  var b = 2;
}
test(); // 执行一遍 test函数
window.a; // => 1
window.b; // => undefined
```

注意：这里需要执行一遍 test函数，让函数体运行一遍。



```
【作用域】
有关作用域的相关知识，在本节暂不做过多介绍，先记住下面几点：
1. 全局作用域、局部作用域
   简单点说，全局作用域就是函数外，局部作用域就是函数内。
2. 函数中声明的变量，仅能在函数中使用，在外部无效；
3. 函数内部可以访问全局作用域中的变量，但是全局不能访问函数局部作用域中的变量；
PS：有关作用域的内容，会在进阶课程 => 作用域 中讲解。
```

### 参数

参数表示函数运行的未知条件，需要调用者告知的数据。

```js
function 函数名(形参1, 形参2, ...){
  // => 函数体
}
函数名(实参);
```

函数参数的有效范围在函数体中。

函数在声明时，需要确认好形参，形参个数可以是0个或多个。

函数调用时传入实参，调用时，并不是说函数定义了几个形参，就要传入几个实参，实参的数量可多可少。多了忽略，相当于没传；少了，相当于缺少的部分传递的是 undefined。

```js
function test(a, b, c) {
  console.log(a, b, c);
}
test(1, 2); // => 1 2 undefined
test(1, 2, 3); // => 1 2 3
test(1, 2, 3, 4); // => 1 2 3
```

### 返回值

函数运行后，得到的结果称为返回值，也就是调用函数的表达式的值。

使用 return 关键字来指定函数的返回值。

- return
  - return 会直接结束整个函数的运行
  - return 后面如果不跟任何数据，返回 undefined
  - 如果函数中没有书写 return，则该函数会在末尾自动 return undefined。

```js
function test() {
  return 1;
}
const val = test(); // 定义一个变量 val，用于存放 test() 函数调用后的返回结果
val; // => 1
```

```js
function test() {
  return;
}
const val = test();
val; // => undefined
```

```js
function test() {
  // => 函数体
}
const val = test();
val; // => undefined
```

### 文档注释

操作: 在 .js 文件下的某个函数声明的前一行，输入 `/**` 后 按 回车 就会自动生成文档注释。

文档注释的目的：为了让函数调用者更直观地了解到该函数的相关功能，以及调用该函数所需要传入的相关参数。

```js
/**
 * 函数的功能描述
 * @param {Number} a 对 形参a 的一些描述信息
 * @param {Number} b 对 形参b 的一些描述信息
 * @param {Number} c 对 形参c 的一些描述信息
 */
function test(a, b, c) {
  // => 函数体
}
```

### 作业

```
通用函数编写, 新建一个js文件，编写以下函数

1. 写一个函数，该函数用于判断某个数是不是奇数
    函数名参考：isOdd

2. 写一个函数，该函数用于判断某个数是不是素数
    函数名参考：isPrime

3. 写一个函数，该函数用于对数组求和
    函数名参考：sumOfArray

4. 写一个函数，该函数用于得到数组中的最大值
    函数名参考：maxOfArray

5. 写一个函数，该函数用于得到数组中的最小值
    函数名参考：minOfArray

6. 写一个函数，该函数用于判断数组是否是稀松数组
    函数名参考：hasEmptyInArray

7. 写一个函数，判断该某年是否是闰年
    函数名参考：isLeap

8. 写一个函数，得到某年某月的天数
    函数名参考：getDays

9. 写一个函数，得到某个数字数组中出现次数最多的数字和频率
    函数名参考：getTopFreqInArray

函数使用
1. 利用上面的某些函数，实现哥德巴赫猜想
    任一大于2的偶数都可写成两个质数之和，比如：8 = 3 + 5
    让用户输入一个大于2的整数，输出其等于哪两个素数相加

2. 让用户输入一个年份，输出该年每个月的天数
```

